import{c as u,r as d,j as e}from"./index-ARmbpGj2.js";import{A as m}from"./api-DZ1q1-OU.js";const x=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],f=u("save",x);function b(){const l={secgen:{manager:30,subordinate:50,self:20,peer:0},leader:{manager:40,subordinate:20,self:20,peer:20},member:{manager:35,subordinate:0,self:20,peer:25}},[t,a]=d.useState(l),[s,c]=d.useState(!1);d.useEffect(()=>{(async()=>{c(!0);const r=await m.fetchConfig();r&&a(r),c(!1)})()},[]);const h=async()=>{confirm("설정을 저장하시겠습니까? (DB 연동)")&&((await m.saveConfig(t)).success?alert("설정이 저장되었습니다."):alert("저장 실패"))},i=(n,r,p)=>{a(g=>({...g,[n]:{...g[n],[r]:parseInt(p)||0}}))};return e.jsxs("div",{className:"card animate-fade-in",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h3",{children:"평가 비율 설정"}),e.jsx("h3",{children:"평가 비율 설정"}),e.jsxs("button",{className:"btn btn-primary",onClick:h,disabled:s,children:[e.jsx(f,{size:16,style:{marginRight:"0.5rem"}})," ",s?"로딩 중...":"설정 저장"]})]}),e.jsx("p",{className:"text-sub",style:{marginBottom:"2rem"},children:"각 직책별 평가 항목의 반영 비율을 설정합니다. 합계는 반드시 100%가 되어야 합니다."}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",textAlign:"center"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"var(--bg-input)",borderBottom:"2px solid var(--border-light)"},children:[e.jsx("th",{style:{padding:"1rem"},children:"평가 대상"}),e.jsx("th",{style:{padding:"1rem",color:"#ef4444"},children:"관리자 평가"}),e.jsx("th",{style:{padding:"1rem"},children:"동료 평가"}),e.jsx("th",{style:{padding:"1rem",color:"#ef4444"},children:"종사자(하급자) 평가"}),e.jsx("th",{style:{padding:"1rem",color:"#ef4444"},children:"본인 평가"}),e.jsx("th",{style:{padding:"1rem"},children:"합계"})]})}),e.jsxs("tbody",{children:[e.jsx(o,{role:"사무국장",data:t.secgen,onChange:(n,r)=>i("secgen",n,r)}),e.jsx(o,{role:"팀장",data:t.leader,onChange:(n,r)=>i("leader",n,r)}),e.jsx(o,{role:"팀원 (선임)",data:t.member,onChange:(n,r)=>i("member",n,r)})]})]})]})}function o({role:l,data:t,onChange:a}){return e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-light)"},children:[e.jsx("td",{style:{padding:"1rem",fontWeight:600},children:l}),e.jsxs("td",{style:{padding:"0.5rem"},children:[e.jsx("input",{className:"input-field",type:"number",value:t?.manager||0,onChange:s=>a("manager",s.target.value),style:{textAlign:"center"}})," %"]}),e.jsxs("td",{style:{padding:"0.5rem"},children:[e.jsx("input",{className:"input-field",type:"number",value:t?.peer||0,onChange:s=>a("peer",s.target.value),style:{textAlign:"center"}})," %"]}),e.jsxs("td",{style:{padding:"0.5rem"},children:[e.jsx("input",{className:"input-field",type:"number",value:t?.subordinate||0,onChange:s=>a("subordinate",s.target.value),style:{textAlign:"center"}})," %"]}),e.jsxs("td",{style:{padding:"0.5rem"},children:[e.jsx("input",{className:"input-field",type:"number",value:t?.self||0,onChange:s=>a("self",s.target.value),style:{textAlign:"center"}})," %"]}),e.jsxs("td",{style:{padding:"1rem",fontWeight:700,color:"var(--primary-600)"},children:[(t?.manager||0)+(t?.peer||0)+(t?.subordinate||0)+(t?.self||0),"%"]})]})}export{b as default};
