import{c as u,r as m,j as e}from"./index-B0ibynyp.js";import{A as g}from"./api-uRinHLKw.js";import{C as j}from"./circle-alert-DpLLBqLU.js";const N=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],v=u("save",N);function S(){const c={secgen:{director:30,secgen:0,leader:50,member:0,self:20},leader:{director:20,secgen:20,leader:20,member:20,self:20},member:{director:0,secgen:20,leader:35,member:25,self:20}},[l,n]=m.useState(c),[x,b]=m.useState(!1);m.useEffect(()=>{(async()=>{b(!0);const r=await g.fetchConfig();r&&r.secgen&&r.secgen.director!==void 0&&n(r),b(!1)})()},[]);const p=async()=>{for(const[s,r]of Object.entries(l)){const t=(r.director||0)+(r.secgen||0)+(r.leader||0)+(r.member||0)+(r.self||0);if(t!==100){alert(`[${h(s)}]의 평가 비율 합계가 100%가 아닙니다. (현재: ${t}%)`);return}}confirm("설정을 저장하시겠습니까?")&&((await g.saveConfig(l)).success?alert("설정이 저장되었습니다."):alert("저장 실패"))},d=(s,r,t)=>{const o=parseInt(t)||0;n(a=>({...a,[s]:{...a[s],[r]:o}}))},h=s=>({secgen:"사무국장",leader:"팀장",member:"팀원 (선임)"})[s]||s,f=s=>(s.director||0)+(s.secgen||0)+(s.leader||0)+(s.member||0)+(s.self||0);return e.jsxs("div",{className:"card animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold flex items-center gap-2",children:"평가 비율 설정"}),e.jsxs("button",{className:"btn btn-primary flex items-center gap-2",onClick:p,disabled:x,children:[e.jsx(v,{size:16})," ",x?"저장 중...":"저장하기"]})]}),e.jsxs("div",{className:"bg-blue-50 text-blue-800 p-4 rounded-lg mb-6 flex items-start gap-3",children:[e.jsx(j,{size:20,className:"mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"설정 안내"}),e.jsxs("p",{className:"text-sm mt-1",children:["각 직책별(행)로 평가자(열)의 반영 비율을 설정할 수 있습니다.",e.jsx("br",{}),"모든 항목의 합계는 반드시 ",e.jsx("span",{className:"font-bold text-red-600",children:"100%"}),"가 되어야 합니다."]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-center text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-gray-700 border-b-2 border-gray-200",children:[e.jsx("th",{className:"p-3 border-r min-w-[100px]",children:"평가 대상"}),e.jsx("th",{className:"p-3 border-r min-w-[80px]",children:"관장"}),e.jsx("th",{className:"p-3 border-r min-w-[80px]",children:"사무국장"}),e.jsx("th",{className:"p-3 border-r min-w-[80px]",children:"팀장"}),e.jsx("th",{className:"p-3 border-r min-w-[80px]",children:"팀원"}),e.jsx("th",{className:"p-3 border-r min-w-[80px] text-blue-600",children:"본인"}),e.jsx("th",{className:"p-3 min-w-[80px] font-bold",children:"합계"})]})}),e.jsx("tbody",{children:["secgen","leader","member"].map(s=>{const r=l[s],t=f(r),o=t===100;return e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-semibold bg-gray-50 border-r",children:h(s)}),e.jsx("td",{className:"p-2 border-r",children:e.jsx(i,{value:r.director,onChange:a=>d(s,"director",a)})}),e.jsx("td",{className:"p-2 border-r",children:e.jsx(i,{value:r.secgen,onChange:a=>d(s,"secgen",a)})}),e.jsx("td",{className:"p-2 border-r",children:e.jsx(i,{value:r.leader,onChange:a=>d(s,"leader",a)})}),e.jsx("td",{className:"p-2 border-r",children:e.jsx(i,{value:r.member,onChange:a=>d(s,"member",a)})}),e.jsx("td",{className:"p-2 border-r bg-blue-50/50",children:e.jsx(i,{value:r.self,onChange:a=>d(s,"self",a)})}),e.jsxs("td",{className:`p-3 font-bold ${o?"text-green-600":"text-red-500"}`,children:[t,"%"]})]},s)})})]})})]})}function i({value:c,onChange:l}){return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",className:`w-full text-center p-2 rounded border focus:ring-2 focus:ring-primary-500 focus:outline-none transition-all ${c>0?"border-gray-300 bg-white":"border-gray-100 bg-gray-50 text-gray-400"}`,value:c,onChange:n=>l(n.target.value),onFocus:n=>n.target.select()}),c>0&&e.jsx("span",{className:"absolute right-1 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"%"})]})}export{S as default};
