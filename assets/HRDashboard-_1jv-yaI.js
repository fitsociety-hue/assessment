import{r as c,R as u,j as e}from"./index-BqY5JvmB.js";import{D as h}from"./download-DVh20nzR.js";import{U as p}from"./users-B7p9De9p.js";import{F as g,C as m}from"./file-text-lqrXDkue.js";function v(){const[a,i]=c.useState({total:0,completed:0,progress:0}),[l,n]=c.useState([]);u.useEffect(()=>{const t=localStorage.getItem("dashboardStats");if(t)try{const r=JSON.parse(t);i({total:r.totalUsers||0,completed:r.completedCount||0,progress:r.completedRatio||0})}catch{}const s=localStorage.getItem("evaluationResults");if(s)try{const r=JSON.parse(s);Array.isArray(r)&&n(r)}catch{}},[]);const o=t=>{const s=parseFloat(t);return s>=95?"S":s>=85?"A":s>=75?"B":s>=65?"C":"D"},x=t=>{switch(t){case"S":return"#8b5cf6";case"A":return"#3b82f6";case"B":return"#10b981";case"C":return"#f59e0b";case"D":return"#ef4444";default:return"#9ca3af"}};return e.jsxs("div",{className:"dashboard-grid animate-fade-in",children:[e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"인사담당자 대시보드"}),e.jsx("p",{className:"text-sub",children:"2025년 근무평정 진행 현황 (최종 결과 조회 전용)"})]}),e.jsxs("button",{className:"btn btn-outline",onClick:()=>alert("최종 결과 보고서가 다운로드됩니다."),children:[e.jsx(h,{size:16,style:{marginRight:"0.5rem"}})," 결과 보고서 다운로드"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginTop:"1.5rem"},children:[e.jsx(d,{icon:e.jsx(p,{className:"text-blue-500"}),label:"전체 대상자",value:a.total,sub:"명"}),e.jsx(d,{icon:e.jsx(g,{className:"text-teal-500"}),label:"평가 완료",value:a.completed,sub:"건"}),e.jsx(d,{icon:e.jsx(m,{className:"text-indigo-500"}),label:"진행률",value:`${a.progress}%`,sub:"전체 평균"})]})]}),e.jsxs("div",{className:"card",style:{minHeight:"400px",gridColumn:"1 / -1"},children:[e.jsx("h3",{children:"최종 평가 결과 (인사팀 조회용)"}),e.jsx("p",{className:"text-sub",children:"각 직원의 최종 점수와 등급만 표시됩니다. 상세 평가 내역은 보호됩니다."}),l.length>0?e.jsx("div",{style:{overflowX:"auto",marginTop:"1.5rem"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.95rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"var(--bg-input)",borderBottom:"2px solid var(--border-light)"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"이름"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"부서"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"총점"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"최종 등급"})]})}),e.jsx("tbody",{children:l.map((t,s)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-light)"},children:[e.jsx("td",{style:{padding:"1rem"},children:t.이름||t.Name||t.name}),e.jsx("td",{style:{padding:"1rem"},children:t.부서||t.Team||t.team}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:"bold"},children:t.totalScore}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.3rem 0.8rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:600,background:x(t.grade||o(t.totalScore)),color:"white"},children:t.grade||o(t.totalScore)})})]},s))})]})}):e.jsxs("div",{style:{marginTop:"2rem",height:"300px",background:"var(--bg-input)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"var(--text-sub)"},children:[e.jsx(m,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"현재 확정된 평가 결과가 없습니다."}),e.jsx("p",{style:{fontSize:"0.8rem"},children:"(관리자가 결과 처리를 완료하면 여기에 표시됩니다)"})]})]})]})}function d({icon:a,label:i,value:l,sub:n}){return e.jsxs("div",{style:{padding:"1.5rem",background:"var(--bg-input)",borderRadius:"var(--radius-md)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[i,a]}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:700},children:l}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-sub)"},children:n})]})}export{v as default};
